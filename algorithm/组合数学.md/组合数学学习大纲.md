## **一、基础概念**

1. **计数原理**
   - **加法原理**：互斥事件的计数。
   - **乘法原理**：独立事件的计数。
   - **容斥原理**：有交集的计数。
   - **鸽笼原理**：保证性问题，常考“至少”、“必然”类型。
2. **排列与组合**
   - 排列：P(n, k) = n! / (n-k)!
   - 组合：C(n, k) = n! / (k! * (n-k)!)
   - 带重复的排列/组合：
     - 多重集合排列。
     - 重复组合公式：C(n+k-1, k)
   - 性质：
     - 对称性：C(n, k) = C(n, n-k)
     - 递推：C(n, k) = C(n-1, k-1) + C(n-1, k)
3. **阶乘和二项式系数**
   - 阶乘性质和模运算（大数取模）
   - **Lucas定理**：模质数计算组合数
   - 扩展Lucas + 逆元：模大质数或非质数
4. **Catalan数**
   - 常用公式：Cn = 1/(n+1) * C(2n, n)
   - 典型应用：
     - 括号匹配
     - 树的计数
     - 不相交路径

------

## **二、高级计数技巧**

1. **容斥原理（PIE）**
   - 多重条件排除。
   - 公式：
      |A1 ∪ A2 ∪ ... ∪ An| = Σ|Ai| - Σ|Ai ∩ Aj| + Σ|Ai ∩ Aj ∩ Ak| - ...
2. **生成函数（Generating Functions）**
   - 普通生成函数：用于排列组合问题。
   - 指数生成函数：用于有标号对象计数。
   - 技巧：
     - 分项求和
     - 多项式乘法（卷积）
     - 常用公式：(1+x)^n 展开对应组合数
3. **递推与状态转移**
   - DP+组合计数：格点路径、括号序列、区间划分
   - 典型递推：
      f(n) = Σ f(i) * f(n-i-1)
4. **Burnside引理 / Polya计数**
   - 对称计数问题（颜色染色、轮转排列）
   - 求不同排列/图形数量

------

## **三、常用组合结构**

1. **集合与子集**
   - 子集个数 2^n
   - 特定大小子集：C(n, k)
2. **排列/序列**
   - 有序排列
   - 循环排列
   - 不同元素排列计数（带重复）
3. **图/树**
   - 树的计数：Cayley公式 n^(n-2)
   - 有根/无根树计数
   - 森林、生成树计数
4. **格点路径**
   - 栅格路径：组合数
   - 障碍格点 + DP
   - 不相交路径 → Catalan数 / DP
5. **分拆/划分**
   - 整数拆分
   - 集合划分（Stirling数、Bell数）
   - 循环排列 / 分组计数

------

## **四、常用公式和定理**

- Σ C(n, k) = 2^n
- Σ (-1)^k C(n, k) = 0
- Vandermonde恒等式：Σ C(m, k) * C(n, r-k) = C(m+n, r)
- **Stirling数**
  - 第1类：排列循环数
  - 第2类：划分集合数量
- **Bell数**：划分全集合方式总数
- **Catalan数**：括号序列、树结构

------

## **五、竞赛技巧与算法实现**

1. **模运算组合数**
   - 预处理阶乘 + 逆元
   - Lucas定理
   - 多项式卷积（FFT/NTT）做生成函数
2. **DP+组合**
   - 树型DP、区间DP、背包型DP
3. **快速计数技巧**
   - 容斥 + 位运算
   - 位DP
   - 状态压缩DP
4. **对称性问题**
   - Burnside / Polya
   - 循环/旋转/镜像计数

------

## **六、学习顺序建议（ACM路线）**

1. 基础计数原理、排列组合
2. 模组合数、阶乘性质
3. Catalan数、递推DP
4. 容斥原理、生成函数
5. 树与图的组合计数
6. 对称计数（Burnside、Polya）
7. 进阶：Stirling数、Bell数、整数划分
8. 实战题训练 → 结合DP、状态压缩、卷积

