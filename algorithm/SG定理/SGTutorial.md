# SG 定理（无公式版）

## 1）什么是 SG 定理

每个无后手博弈状态，都能用一个非负整数来表示它的“胜败性质”，这个数叫 **SG 值**。

结论：

- SG = 0  → 当前玩家必败（无论怎么走都送赢给对方）
- SG ≠ 0 → 当前玩家必胜（存在一步能把对方送进 SG=0）

当多个子游戏并列时（比如多堆石子），总 SG 值 = 各子游戏 SG 值按位异或（xor）

```
总SG = SG1 xor SG2 xor SG3 ...
```

------

## 2）SG 值怎么定义（不用公式说人话）

对于一个状态 x：

1. 看它能走到哪些“下一步状态”
2. 把那些下一步状态的 SG 值写出来一个集合
3. SG(x) = 这个集合中 **最小的没有出现的非负整数**
    这个运算叫 mex（minimum excluded）

举例说明 mex：

```
mex{0,1,5} = 2
mex{1,2,3} = 0
mex{0,2,3} = 1
```

------

## 3）一个完整例子：一次可拿 1~3 石子

求 SG(0) ~ SG(5)

```
SG(0) = 0   // 无法继续，定义为0

SG(1)：能到 SG(0) → 集合={0} → mex=1
SG(2)：能到 SG(1), SG(0) → 集合={1,0} → mex=2
SG(3)：能到 SG(2), SG(1), SG(0) → 集合={2,1,0} → mex=3

SG(4)：能到 SG(3),SG(2),SG(1) → 集合={3,2,1} → mex=0
SG(5)：能到 SG(4),SG(3),SG(2) → 集合={0,3,2} → mex=1
```

表格形式：

| n石子 | 可到达SG集合 | SG(n) |
| ----- | ------------ | ----- |
| 0     | -            | 0     |
| 1     | {0}          | 1     |
| 2     | {0,1}        | 2     |
| 3     | {0,1,2}      | 3     |
| 4     | {1,2,3}      | 0     |
| 5     | {0,2,3}      | 1     |

所以 5 个石子时 SG=1 ≠ 0 → 当前先手必胜

------

## 4）SG 定理总结（纯记忆版）

```
1）终止状态 SG = 0
2）SG(x) = mex(所有下一步状态的SG值)
3）多个子游戏的总SG = 所有子游戏SG值的异或
4）总SG = 0 → 必败；总SG ≠ 0 → 必胜
```

